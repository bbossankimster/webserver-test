#  webserver-test

## Краткое описание основного функционала

webserver-test - проект, в котором показаны задачи из моей текущей работы и решения, которые я релизовал.

Ядро проекта - классы CommonWebserverTest, WebserverTestWithLogs
Основной функционал - отправка HTTP запросов по списку URL, обработка кодов ответа, сбор логов с веб серверов, отправка отчетов
Проект можно отнести к классу OAM tools для системных инженеров и отдела поддержки.

P.S. Название сервисов, тестовых страниц, клиентов приведены только для демонстрации функционала проекта.
Данные не связаны с тем, что у меня в продакшене

![](images/short_description.png)

## Проблемы, которые решает проект

Моя фирма подключает и настривает сервера по всему миру.
Несколько тысяч серверов и виртуальных машин, несколько тысяч клиентов.
Веб-сервер в этом проекте представлен для демонстрации, как один из видов серверов в нашем продакшене.

Веб-сервис клиента развернут на нескольких серверах для балансировки нагрузки и резервирования.
Система мониторинга (Icinga, Zabbix, Prometheus и т.д.) регистрируют события отдельного сервера.
На уровне nginx проверяется доступность порта 80/443, на уровне сервера проверяется ping и т.д.

Проблема 1: события в Zabbix/Prometheus/Icinga не агрегированы по клиентам и сервисам
Для поддержки веб сервисов приходится тратить время на сбор, группировку, обобщение данных при возникновении проблем у конкретных клиентов

Пример: Zabbix показывает, что 10 серверов отключились, и WEB сервис перестал работать.
Что это значит? Затронет ли это клиента А или клиента Б? Критическое это отключение или нет?
Как реагировать группе мониторинга и т.д.

С помощью проверки WEB сервисов по всем клиентам можно проверить, какие изменения произошли.


Проблема 2.1: мониторинг качества сервиса на разных серверах, для разных клиентов
Проблема 2.2: мониторинг качества сервисов одного клиента

Необходимость таких проверок возникает:
- по запросу клиента в отдел поддержки (если клиент наблюдает ухудшение качества)
- во время планового обновления софта на для сервисов конкретного клиента или для конкретныз сервисов всех клиентов

Базовый класс webserver-test выполняет тестирование WEB сервисов в группе серверов клиентов, агрегирует результат про группе серверов/сервису
Расширенный класс собирает логи с веб серверов, выдает отчет с результами на email и skype в зависимости от уровня критичности вывленных ошибок.
Тестирование выполняется с помощью асинхронной отправки http запроса на тестовую страницу сервиса.


![](images/detailed_model.png)